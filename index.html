<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì„¸ì»¨ë¨¸ë‹ˆ ì‹¤í—˜ì‹¤ - ì˜¤ëŠ˜ì˜ AI íƒ€ë¡œ ìš´ì„¸</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #f8f9fa;
      padding: 2rem;
      max-width: 600px;
      margin: auto;
    }
    h1, h2 {
      text-align: center;
    }
    .summary {
      background-color: #fff3cd;
      border: 1px solid #ffeeba;
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 1rem;
    }
    .card {
      background-color: white;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 0.5rem;
    }
    .card strong {
      display: inline-block;
      margin-bottom: 0.3rem;
    }
    #bonus-message {
      background-color: #d4edda;
      border: 1px solid #c3e6cb;
      padding: 1rem;
      border-radius: 8px;
      margin-top: 1rem;
      display: none;
    }
    footer {
      margin-top: 2rem;
      text-align: center;
      font-size: 0.9rem;
      color: #6c757d;
    }
    button {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 5px;
      background-color: #007bff;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
  <h1>ğŸ”® ì„¸ì»¨ë¨¸ë‹ˆ ì‹¤í—˜ì‹¤ â€“ ì˜¤ëŠ˜ì˜ AI íƒ€ë¡œ ìš´ì„¸</h1>
  <div class="summary" id="summary"></div>
  <div id="reading"></div>
  <div id="bonus-message"></div>
  <button onclick="drawCards()">ì¹´ë“œ ë½‘ê¸°</button>
  <br>
  <button onclick="shareResult()">ğŸ“¤ ê²°ê³¼ ê³µìœ í•˜ê¸°</button>

  <footer>
    ğŸ‘‰ ë³¸ ì„œë¹„ìŠ¤ëŠ” <a href="https://blog.naver.com/greenfrog232" target="_blank">ì„¸ì»¨ë¨¸ë‹ˆ ì‹¤í—˜ì‹¤ ë¸”ë¡œê·¸</a>ì—ì„œ ìš´ì˜ë©ë‹ˆë‹¤.<br>
    ğŸ‘ ëˆ„ì  ë°©ë¬¸ì ìˆ˜: <span id="visitor-count">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span>
  </footer>

  <script>
    const tarotDeck = {
      "ì—¬êµí™©": { emoji: "ğŸ‘", ì •ë°©í–¥: { score: 3, message: "ì¡°ìš©íˆ ë§ˆìŒì„ ë“¤ì—¬ë‹¤ë³´ë©´ ë‹µì´ ë³´ì—¬ìš” ğŸƒ", char: "ì¬í¼ìŠ¨" }, ì—­ë°©í–¥: { score: -2, message: "ë§¨ë‚  ê³ ë¯¼ë§Œ í•˜ë‹¤ ì‹œê°„ ë‹¤ ê°„ë‹¤. ê²°ë‹¨ë ¥ ì¢€ í‚¤ì›Œ.", char: "ì™“ìŠ¨" } },
      "ì—°ì¸": { emoji: "ğŸ’", ì •ë°©í–¥: { score: 4, message: "ì‚¬ë‘ì´ í”¼ì–´ë‚˜ê³  ìˆì–´ìš” ğŸ’– ì¤‘ìš”í•œ ì„ íƒì˜ ìˆœê°„ì´ì—ìš”!", char: "ì¬í¼ìŠ¨" }, ì—­ë°©í–¥: { score: -4, message: "ê°ì •ì— íœ˜ë‘˜ë ¤ì„œ íŒë‹¨ë ¥ ë°”ë‹¥ì„. ê·¸ëƒ¥ ë§‰ ë“¤ì´ëŒ”ë‹¤ê°€ ë‹¤ ìƒëŠ”ë‹¤.", char: "ì™“ìŠ¨" } }
    };

    const positions = ['ê³¼ê±°', 'í˜„ì¬', 'ë¯¸ë˜'];
    const specialCombos = [['ì—¬êµí™©', 'ì—°ì¸', 'íƒœì–‘']];

    function drawCards() {
      const names = Object.keys(tarotDeck);
      const selected = [];
      while (selected.length < 3) {
        const pick = names[Math.floor(Math.random() * names.length)];
        if (!selected.includes(pick)) selected.push(pick);
      }
      const result = selected.map(name => ({
        name,
        upright: Math.random() > 0.5
      }));
      displayCards(result);
    }

    function displayCards(cards) {
      const summary = document.getElementById('summary');
      const reading = document.getElementById('reading');
      const bonus = document.getElementById('bonus-message');
      reading.innerHTML = '';
      let total = 0;
      cards.forEach((card, i) => {
        const data = tarotDeck[card.name];
        const detail = card.upright ? data.ì •ë°©í–¥ : data.ì—­ë°©í–¥;
        total += detail.score;
        reading.innerHTML += `<div class="card">ğŸ” <strong>${positions[i]}</strong> â€“ ${data.emoji} ${card.name} â†’ (${card.upright ? 'ì •ë°©í–¥' : 'ì—­ë°©í–¥'})<br>â†’ "${detail.message}" â€“ <strong>${detail.char}</strong></div>`;
      });
      if (total >= 4) summary.innerHTML = 'ğŸ¦ ì¬í¼ìŠ¨ says: ë¬´ë‚œí•œ í•˜ë£¨ê°€ ë  ê²ƒ ê°™ì•„ìš”~ ë”°ëœ»í•˜ê²Œ ë³´ë‚´ì„¸ìš” â˜•';
      else if (total <= -2) summary.innerHTML = 'ğŸ¦‰ ì™“ìŠ¨ says: ì˜¤ëŠ˜ì€ ê¸´ì¥í•´ì•¼ í•  ìˆ˜ë„â€¦ ë¬¸ì œê°€ ìƒê¸¸ì§€ë„ ëª°ë¼ìš”.';
      else summary.innerHTML = 'ğŸ¤” ì˜¤ëŠ˜ì€ í˜ëŸ¬ê°€ëŠ” ëŒ€ë¡œ. íŠ¹ë³„í•œ ì¼ì€ ì—†ì„ ë“¯í•´ìš”.';

      const uprightNames = cards.filter(c => c.upright).map(c => c.name).sort();
      specialCombos.forEach(combo => {
        if (JSON.stringify(uprightNames.sort()) === JSON.stringify(combo.sort())) {
          bonus.style.display = 'block';
          bonus.textContent = 'ğŸ€ ë„¤ìí´ë¡œë²„ ë“±ì¥! ì˜¤ëŠ˜ ë³µê¶Œ ì‚¬ë„ ë ì§€ë„!? ğŸŒŸğŸ’° (ë ˆì–´)'
        } else {
          bonus.style.display = 'none';
        }
      });
    }

    function shareResult() {
      const summaryText = document.getElementById('summary').innerText;
      const readingText = document.getElementById('reading').innerText;
      const text = `ì˜¤ëŠ˜ì˜ íƒ€ë¡œ ìš´ì„¸ ğŸŒ \n\n${summaryText}\n\n${readingText}\n\nğŸ‘‰ ì „ì²´ ë³´ê¸°: https://jeffersonwattson.github.io/tarot-ai/`;
      navigator.clipboard.writeText(text).then(() => alert('ê²°ê³¼ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!')); 
    }

    // ë°©ë¬¸ì ìˆ˜ (ë¡œì»¬ ì €ì¥)
    const visitKey = 'tarot-visit-count';
    let visit = localStorage.getItem(visitKey);
    visit = visit ? parseInt(visit) + 1 : 1;
    localStorage.setItem(visitKey, visit);
    document.getElementById('visitor-count').textContent = `${visit.toLocaleString()}ëª…`;

    // ì‹œì‘ ì‹œ ìë™ ì‹¤í–‰
    drawCards();
  </script>
</body>
</html>

