<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>세컨머니 실험실 - 오늘의 타로 운세</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #fff8f0;
      padding: 2rem;
      max-width: 600px;
      margin: auto;
      line-height: 1.6;
    }
    h1, h2 {
      text-align: center;
    }
    .card {
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      background-color: #ffffff;
    }
    .special-message {
      padding: 1rem;
      margin-top: 2rem;
      background-color: #e3fcef;
      border: 2px dashed #34a853;
      border-radius: 8px;
      font-weight: bold;
      display: none;
    }
    .summary {
      font-size: 1.2rem;
      font-weight: bold;
      text-align: center;
      margin-top: 2rem;
    }
    footer {
      margin-top: 4rem;
      font-size: 0.9rem;
      text-align: center;
      color: #777;
    }
  </style>
</head>
<body>
  <h1>🧪 세컨머니 실험실</h1>
  <h2>🔮 오늘의 타로 운세</h2>
  
  <div id="tarot-results"></div>
  <div class="summary" id="summary"></div>
  <div class="special-message" id="bonus-message"></div>

  <footer>
    👉 본 서비스는 <a href="https://blog.naver.com/greenfrog232" target="_blank">세컨머니 실험실 블로그</a>에서 운영됩니다.<br>
    누적 이용자: <span id="visitor-count">...</span>
  </footer>

  <script>
    const tarotDeck = {
      "바보": { emoji: "🃏", 정방향: { score: 3, message: "새로운 시작이에요! 뭐든지 해볼 수 있는 시기예요 💫", char: "재퍼슨" }, 역방향: { score: -3, message: "생각 없이 질렀지? 이제 후회할 일만 남았다.", char: "왓슨" } },
      "마법사": { emoji: "✨", 정방향: { score: 4, message: "잠재력이 활짝 열리는 시점이에요 ✨ 믿고 해보세용!", char: "재퍼슨" }, 역방향: { score: -3, message: "허세 부리다 자빠진다. 실력도 안 되면서 과신하지 마.", char: "왓슨" } },
      // ... (생략: 다른 카드들 포함됨)
      "세계": { emoji: "🌍", 정방향: { score: 5, message: "완성, 성취, 통합! 지금 최고예요 🌍", char: "재퍼슨" }, 역방향: { score: -2, message: "끝난 줄 알았지? 미완의 마무리야. 한 번 더 봐봐.", char: "왓슨" } }
    };

    const specialCombos = [
      ["바보", "운명의 수레바퀴", "태양"],
      ["연인", "마법사", "세계"],
      ["전차", "힘", "정의"],
      ["별", "여제", "태양"],
      ["죽음", "심판", "세계"]
    ];

    function displayResults(cards) {
      let totalScore = 0;
      const resultDiv = document.getElementById("tarot-results");
      resultDiv.innerHTML = "";

      cards.forEach(c => {
        const cardData = tarotDeck[c.name];
        const isUpright = c.upright;
        const detail = isUpright ? cardData.정방향 : cardData.역방향;
        totalScore += detail.score;
        resultDiv.innerHTML += `<div class='card'>${cardData.emoji} <strong>${c.name}</strong> (${isUpright ? '정방향 ↑' : '역방향 ↓'})<br><em>${detail.char} says:</em> ${detail.message}</div>`;
      });

      const summary = document.getElementById("summary");
      if (totalScore >= 9) {
        summary.textContent = "✨ 재퍼슨 says: 오늘은 운수대통! 좋은 기회가 많을 거예요!";
      } else if (totalScore <= -6) {
        summary.textContent = "🦉 왓슨 says: 오늘은 쉽지 않은 날이에요. 침착하게 대응하세요.";
      } else {
        summary.textContent = "🤔 오늘은 평범한 하루! 그래도 마음가짐이 제일 중요해요!";
      }

      // 보너스 메시지 조건
      const drawnNames = cards.filter(c => c.upright).map(c => c.name).sort();
      const bonusDiv = document.getElementById("bonus-message");
      specialCombos.forEach(combo => {
        const sortedCombo = combo.slice().sort();
        if (JSON.stringify(drawnNames) === JSON.stringify(sortedCombo)) {
          bonusDiv.style.display = "block";
          bonusDiv.textContent = "🍀 네잎클로버 등장! 오늘 복권 사도 될지도!?";
        }
      });
    }

    // 샘플 카드 뽑기 시뮬레이션 (테스트용)
    const allCardNames = Object.keys(tarotDeck);
    const drawThree = () => {
      const shuffled = allCardNames.sort(() => 0.5 - Math.random());
      return shuffled.slice(0, 3).map(name => ({ name, upright: Math.random() < 0.5 }));
    };
    const drawn = drawThree();
    displayResults(drawn);

    // 방문자 수 증가 (LocalStorage 활용)
    const countKey = "tarot-visitor-count";
    let count = parseInt(localStorage.getItem(countKey) || "0", 10);
    count += 1;
    localStorage.setItem(countKey, count);
    document.getElementById("visitor-count").textContent = `${count.toLocaleString()}명`;
  </script>
</body>
</html>
