<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>AI 타로 운세 뽑기</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f5f5f5; padding: 20px; }
    .container { max-width: 600px; margin: auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    .card-result { margin: 20px 0; }
    .character { font-weight: bold; }
    .summary { background: #ffeaa7; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
    .footer { font-size: 14px; color: #888; margin-top: 30px; }
  </style>
</head>
<body>
<div class="container">
  <h1>🔮 세컨머니 실험실 – 오늘의 AI 타로 운세</h1>

  <div class="summary" id="summary"></div>
  <div class="card-result" id="reading"></div>
  <button onclick="drawTarot()">카드 뽑기</button>
  <br><br>
  <button onclick="shareResult()">📤 결과 공유하기</button>

  <div class="footer">
    👁 누적 방문자 수: <span id="visitor-count">불러오는 중...</span>명
  </div>
</div>

<script>
fetch('https://api.countapi.xyz/hit/jefferson-tarot/v1')
  .then(res => res.json())
  .then(data => {
    document.getElementById('visitor-count').innerText = data.value;
  });

const tarotDeck = {
  "바보": { emoji: "🃏", 정방향: { score: 3, message: "새로운 시작이에요! 뭐든지 해볼 수 있는 시기예요 💫", char: "재퍼슨" }, 역방향: { score: -3, message: "생각 없이 질렀지? 이제 후회할 일만 남았다.", char: "왓슨" } },
  "마법사": { emoji: "✨", 정방향: { score: 4, message: "잠재력이 활짝 열리는 시점이에요 ✨ 믿고 해보세용!", char: "재퍼슨" }, 역방향: { score: -3, message: "허세 부리다 자빠진다. 실력도 안 되면서 과신하지 마.", char: "왓슨" } },
  "여교황": { emoji: "👁", 정방향: { score: 3, message: "조용히 마음을 들여다보면 답이 보여요 🍃", char: "재퍼슨" }, 역방향: { score: -2, message: "맨날 고민만 하다 시간 다 간다. 결단력 좀 키워.", char: "왓슨" } },
  "악마": { emoji: "😈", 정방향: { score: 1, message: "너무 얽매이지 마세요 😈 집착을 내려놓을 때예요!", char: "재퍼슨" }, 역방향: { score: -5, message: "중독, 탐욕, 집착… 솔직히 너 지금 헤어나올 생각도 없지?", char: "왓슨" } },
  "연인": { emoji: "💞", 정방향: { score: 4, message: "사랑이 피어나고 있어요 💖 중요한 선택의 순간이에요!", char: "재퍼슨" }, 역방향: { score: -4, message: "감정에 휘둘려서 판단력 바닥임. 그냥 막 들이댔다가 다 잃는다.", char: "왓슨" } },
  "태양": { emoji: "🌞", 정방향: { score: 5, message: "모든 게 밝아져요! 좋은 소식이 다가오고 있어요 🌞", char: "재퍼슨" }, 역방향: { score: -1, message: "웃고 있지만 가식이다. 무리하게 밝은 척 하지 마.", char: "왓슨" } }
};

function getRandomCard(deck) {
  const keys = Object.keys(deck);
  const cardName = keys[Math.floor(Math.random() * keys.length)];
  const direction = Math.random() > 0.5 ? "정방향" : "역방향";
  const data = deck[cardName][direction];
  const emoji = deck[cardName].emoji;
  return { cardName, direction, emoji, ...data };
}

function drawTarot() {
  const results = [getRandomCard(tarotDeck), getRandomCard(tarotDeck), getRandomCard(tarotDeck)];
  const total = results.reduce((sum, card) => sum + card.score, 0);

  let summary = "";
  if (total >= 9) summary = "🦝 재퍼슨 says: 오늘은 운수대통이에요! 뭐든 잘 풀릴거예용 ✨";
  else if (total >= 4) summary = "🦝 재퍼슨 says: 무난한 하루가 될 것 같아요~ 따뜻하게 보내세요 ☕";
  else if (total >= -3) summary = "🦉 왓슨 says: 복불복이다. 오늘 중심 잘 잡아라.";
  else summary = "🦉 왓슨 says: 운 없다. 긴장 타라. 움직일수록 꼬인다.";

  document.getElementById("summary").innerText = summary;

  const positions = ["🔙 과거", "🕰 현재", "🔮 미래"];
  let html = "";
  results.forEach((card, idx) => {
    const arrow = card.direction === "정방향" ? "→" : "←";
    html += `<p><strong>${positions[idx]}</strong> – ${card.emoji} ${card.cardName} ${arrow} (${card.direction})<br>→ "${card.message}" – <span class='character'>${card.char}</span></p>`;
  });
  document.getElementById("reading").innerHTML = html;
}

function shareResult() {
  const summaryText = document.getElementById("summary").innerText;
  const text = `오늘의 타로 운세:\n${summaryText}`;
  navigator.clipboard.writeText(text).then(() => {
    alert("결과가 복사되었습니다! 블로그나 SNS에 붙여넣기 해보세요 ✨");
  });
}
</script>
</body>
</html>
