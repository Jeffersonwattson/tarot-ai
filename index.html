<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>AI íƒ€ë¡œ ìš´ì„¸ ë½‘ê¸°</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f5f5f5; padding: 20px; }
    .container { max-width: 600px; margin: auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    .card-result { margin: 20px 0; }
    .character { font-weight: bold; }
    .summary { background: #ffeaa7; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
    .footer { font-size: 14px; color: #888; margin-top: 30px; }
  </style>
</head>
<body>
<div class="container">
  <h1>ğŸ”® ì„¸ì»¨ë¨¸ë‹ˆ ì‹¤í—˜ì‹¤ â€“ ì˜¤ëŠ˜ì˜ AI íƒ€ë¡œ ìš´ì„¸</h1>

  <div class="summary" id="summary"></div>
  <div class="card-result" id="reading"></div>
  <button onclick="drawTarot()">ì¹´ë“œ ë½‘ê¸°</button>
  <br><br>
  <button onclick="shareResult()">ğŸ“¤ ê²°ê³¼ ê³µìœ í•˜ê¸°</button>

  <div class="footer">
    ğŸ‘ ëˆ„ì  ë°©ë¬¸ì ìˆ˜: <span id="visitor-count">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span>ëª…
  </div>
</div>

<script>
fetch('https://api.countapi.xyz/hit/jefferson-tarot/v1')
  .then(res => res.json())
  .then(data => {
    document.getElementById('visitor-count').innerText = data.value;
  });

const tarotDeck = {
  "ë°”ë³´": { emoji: "ğŸƒ", ì •ë°©í–¥: { score: 3, message: "ìƒˆë¡œìš´ ì‹œì‘ì´ì—ìš”! ë­ë“ ì§€ í•´ë³¼ ìˆ˜ ìˆëŠ” ì‹œê¸°ì˜ˆìš” ğŸ’«", char: "ì¬í¼ìŠ¨" }, ì—­ë°©í–¥: { score: -3, message: "ìƒê° ì—†ì´ ì§ˆë €ì§€? ì´ì œ í›„íšŒí•  ì¼ë§Œ ë‚¨ì•˜ë‹¤.", char: "ì™“ìŠ¨" } },
  "ë§ˆë²•ì‚¬": { emoji: "âœ¨", ì •ë°©í–¥: { score: 4, message: "ì ì¬ë ¥ì´ í™œì§ ì—´ë¦¬ëŠ” ì‹œì ì´ì—ìš” âœ¨ ë¯¿ê³  í•´ë³´ì„¸ìš©!", char: "ì¬í¼ìŠ¨" }, ì—­ë°©í–¥: { score: -3, message: "í—ˆì„¸ ë¶€ë¦¬ë‹¤ ìë¹ ì§„ë‹¤. ì‹¤ë ¥ë„ ì•ˆ ë˜ë©´ì„œ ê³¼ì‹ í•˜ì§€ ë§ˆ.", char: "ì™“ìŠ¨" } },
  "ì—¬êµí™©": { emoji: "ğŸ‘", ì •ë°©í–¥: { score: 3, message: "ì¡°ìš©íˆ ë§ˆìŒì„ ë“¤ì—¬ë‹¤ë³´ë©´ ë‹µì´ ë³´ì—¬ìš” ğŸƒ", char: "ì¬í¼ìŠ¨" }, ì—­ë°©í–¥: { score: -2, message: "ë§¨ë‚  ê³ ë¯¼ë§Œ í•˜ë‹¤ ì‹œê°„ ë‹¤ ê°„ë‹¤. ê²°ë‹¨ë ¥ ì¢€ í‚¤ì›Œ.", char: "ì™“ìŠ¨" } },
  "ì•…ë§ˆ": { emoji: "ğŸ˜ˆ", ì •ë°©í–¥: { score: 1, message: "ë„ˆë¬´ ì–½ë§¤ì´ì§€ ë§ˆì„¸ìš” ğŸ˜ˆ ì§‘ì°©ì„ ë‚´ë ¤ë†“ì„ ë•Œì˜ˆìš”!", char: "ì¬í¼ìŠ¨" }, ì—­ë°©í–¥: { score: -5, message: "ì¤‘ë…, íƒìš•, ì§‘ì°©â€¦ ì†”ì§íˆ ë„ˆ ì§€ê¸ˆ í—¤ì–´ë‚˜ì˜¬ ìƒê°ë„ ì—†ì§€?", char: "ì™“ìŠ¨" } },
  "ì—°ì¸": { emoji: "ğŸ’", ì •ë°©í–¥: { score: 4, message: "ì‚¬ë‘ì´ í”¼ì–´ë‚˜ê³  ìˆì–´ìš” ğŸ’– ì¤‘ìš”í•œ ì„ íƒì˜ ìˆœê°„ì´ì—ìš”!", char: "ì¬í¼ìŠ¨" }, ì—­ë°©í–¥: { score: -4, message: "ê°ì •ì— íœ˜ë‘˜ë ¤ì„œ íŒë‹¨ë ¥ ë°”ë‹¥ì„. ê·¸ëƒ¥ ë§‰ ë“¤ì´ëŒ”ë‹¤ê°€ ë‹¤ ìƒëŠ”ë‹¤.", char: "ì™“ìŠ¨" } },
  "íƒœì–‘": { emoji: "ğŸŒ", ì •ë°©í–¥: { score: 5, message: "ëª¨ë“  ê²Œ ë°ì•„ì ¸ìš”! ì¢‹ì€ ì†Œì‹ì´ ë‹¤ê°€ì˜¤ê³  ìˆì–´ìš” ğŸŒ", char: "ì¬í¼ìŠ¨" }, ì—­ë°©í–¥: { score: -1, message: "ì›ƒê³  ìˆì§€ë§Œ ê°€ì‹ì´ë‹¤. ë¬´ë¦¬í•˜ê²Œ ë°ì€ ì²™ í•˜ì§€ ë§ˆ.", char: "ì™“ìŠ¨" } }
};

function getRandomCard(deck) {
  const keys = Object.keys(deck);
  const cardName = keys[Math.floor(Math.random() * keys.length)];
  const direction = Math.random() > 0.5 ? "ì •ë°©í–¥" : "ì—­ë°©í–¥";
  const data = deck[cardName][direction];
  const emoji = deck[cardName].emoji;
  return { cardName, direction, emoji, ...data };
}

function drawTarot() {
  const results = [getRandomCard(tarotDeck), getRandomCard(tarotDeck), getRandomCard(tarotDeck)];
  const total = results.reduce((sum, card) => sum + card.score, 0);

  let summary = "";
  if (total >= 9) summary = "ğŸ¦ ì¬í¼ìŠ¨ says: ì˜¤ëŠ˜ì€ ìš´ìˆ˜ëŒ€í†µì´ì—ìš”! ë­ë“  ì˜ í’€ë¦´ê±°ì˜ˆìš© âœ¨";
  else if (total >= 4) summary = "ğŸ¦ ì¬í¼ìŠ¨ says: ë¬´ë‚œí•œ í•˜ë£¨ê°€ ë  ê²ƒ ê°™ì•„ìš”~ ë”°ëœ»í•˜ê²Œ ë³´ë‚´ì„¸ìš” â˜•";
  else if (total >= -3) summary = "ğŸ¦‰ ì™“ìŠ¨ says: ë³µë¶ˆë³µì´ë‹¤. ì˜¤ëŠ˜ ì¤‘ì‹¬ ì˜ ì¡ì•„ë¼.";
  else summary = "ğŸ¦‰ ì™“ìŠ¨ says: ìš´ ì—†ë‹¤. ê¸´ì¥ íƒ€ë¼. ì›€ì§ì¼ìˆ˜ë¡ ê¼¬ì¸ë‹¤.";

  document.getElementById("summary").innerText = summary;

  const positions = ["ğŸ”™ ê³¼ê±°", "ğŸ•° í˜„ì¬", "ğŸ”® ë¯¸ë˜"];
  let html = "";
  results.forEach((card, idx) => {
    const arrow = card.direction === "ì •ë°©í–¥" ? "â†’" : "â†";
    html += `<p><strong>${positions[idx]}</strong> â€“ ${card.emoji} ${card.cardName} ${arrow} (${card.direction})<br>â†’ "${card.message}" â€“ <span class='character'>${card.char}</span></p>`;
  });
  document.getElementById("reading").innerHTML = html;
}

function shareResult() {
  const summaryText = document.getElementById("summary").innerText;
  const text = `ì˜¤ëŠ˜ì˜ íƒ€ë¡œ ìš´ì„¸:\n${summaryText}`;
  navigator.clipboard.writeText(text).then(() => {
    alert("ê²°ê³¼ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ë¸”ë¡œê·¸ë‚˜ SNSì— ë¶™ì—¬ë„£ê¸° í•´ë³´ì„¸ìš” âœ¨");
  });
}
</script>
</body>
</html>
